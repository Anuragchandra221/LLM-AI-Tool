{% extends 'index.html' %}


{% block content %}

    <div>
        <form class="home py-3" id="form" method="POST">
            <div class="answer px-3">
                <p class="heading m-0 text-lg-center">DragonSense AI</p>
                <p class="tagline m-0 text-lg-center">Sense Your Database...</p>
                <p id="answer" class="mt-3"></p>
            </div>
            <div class="input-box">
                <input type="text" name="message" placeholder="Enter your query.." id="text"/>
                <button id="submit">send</button>
            </div>
        </form>
    </div>
    
    

    <script type="text/javascript">
        $(document).ready(()=>{
            $("#submit").click((ev)=>{
                ev.preventDefault();
                // alert("hihi")
                var text = $("#text").val()
                $("#text").val("")
                var existingContent = $("#answer").html();
                var newContent = existingContent  + "<p class='question mb-2'><span class='user'>User: </span>"+ text + "</p>"; // Concatenate
                console.log(existingContent, newContent)
                $("#answer").html(newContent);
                var req = $.ajax({
                    type: 'POST',
                    url: '/',
                    data: {'message':text}
                })
                req.done((data)=>{
                    // $("#answer").text(data.result)
                    var existingContent = $("#answer").html(); // Get existing content
                    var newContent = existingContent + "<p class='answer mb-4'><span class='ai'>DragonSense: </span>"+data.result+"</p>"; // Concatenate
                    console.log(newContent)
                    $("#answer").html(newContent);
                    
                })

            })
        })
    </script>

{% endblock %}